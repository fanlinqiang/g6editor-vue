(function(e){function t(t){for(var n,r,s=t[0],l=t[1],c=t[2],u=0,h=[];u<s.length;u++)r=s[u],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&h.push(a[r][0]),a[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);d&&d(t);while(h.length)h.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var e,t=0;t<o.length;t++){for(var i=o[t],n=!0,s=1;s<i.length;s++){var l=i[s];0!==a[l]&&(n=!1)}n&&(o.splice(t--,1),e=r(r.s=i[0]))}return e}var n={},a={app:0},o=[];function r(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=n,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/g6editor-vue/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=l;o.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},1280:function(e,t,i){},2508:function(e,t,i){},2846:function(e,t,i){"use strict";var n=i("2f6f"),a=i.n(n);a.a},"2f6f":function(e,t,i){},"3baa":function(e,t,i){"use strict";var n=i("e747"),a=i.n(n);a.a},"4b3b":function(e,t,i){e.exports=i.p+"img/model.051d66d3.svg"},"4e6e":function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},o=[],r=(i("cf25"),i("2877")),s={},l=Object(r["a"])(s,a,o,!1,null,null,null),c=l.exports,d=i("8c4f"),u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"editor-wrapper"},[i("div",{staticClass:"layout-header"}),i("div",{staticClass:"layout-body"},[i("div",{staticClass:"layout-body-left"},[i("ItemPanel")],1),i("div",{staticClass:"layout-body-center"},[i("div",{ref:"draw-content",staticClass:"draw-content",attrs:{id:"draw-content"}}),e.graph?i("NodeContextMenu",{attrs:{graph:e.graph}}):e._e()],1),i("div",{staticClass:"layout-body-right"},[i("div",{staticClass:"detail-wrap"},[i("div",{staticClass:"detail-title"},[e._v("详情")]),i("div",{staticClass:"detail-container"},[e.graph?i("DetailPanel",{attrs:{graph:e.graph}}):e._e()],1)]),i("div",{staticClass:"mini-map-wrap"},[i("div",{staticClass:"mini-map-title"},[e._v("缩略图")]),i("div",{ref:"mini-map",staticClass:"mini-map-container"}),e.graph?i("ZoomSlider",{attrs:{graph:e.graph}}):e._e()],1)])])])},h=[],f=(i("5db7"),i("73d9"),i("0d03"),i("b680"),i("e25e"),i("2ef0")),g=i.n(f),p=(i("99af"),i("284c")),m=i("337b"),v=i.n(m);i("4160"),i("ac1f"),i("5319"),i("159b");function y(e,t){for(var i=e[0],n=S(e[0],t),a=0;a<e.length;a++){var o=e[a],r=S(o,t);r<n&&(i=o,n=r)}return i}function S(e,t){return(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)}function b(e){var t=e.graph,i=e.state,n=void 0===i?"selected":i,a=e.itemType,o=void 0===a?["node","edge"]:a,r=[];return o.forEach((function(e){r=r.concat(t.findAllByState(e,n))})),r}var w={getDefaultCfg:function(){return{keyCode:27,edge:null,addingEdge:!1}},getEvents:function(){return{"node:dblclick":"onClick",mousemove:"onMousemove",keydown:"onKeyDown"}},onClick:function(e){var t=e.item,i=this.graph,n={x:e.x,y:e.y},a=t.getModel();if(this.addingEdge&&this.edge&&!this.edge.destroyed){var o=a.id,r=this.edge.getModel(),s=r.source;o===s?i.remove(this.edge):i.updateItem(this.edge,{target:o,targetAnchor:this.getNearestAuchorPointIndex(t,n)}),this.edge=null,this.addingEdge=!1}else this.edge=i.addItem("edge",{source:a.id,sourceAnchor:this.getNearestAuchorPointIndex(t,n),target:n,shape:"flow-spline"}),this.addingEdge=!0},onMousemove:function(e){var t={x:e.x,y:e.y};this.addingEdge&&this.edge&&this.graph.updateItem(this.edge,{target:t})},getNearestAuchorPointIndex:function(e,t){var i=e.getAnchorPoints();return y(i,t).index},onKeyDown:function(e){var t=e.keyCode||e.which;t===this.keyCode&&this.addingEdge&&this.graph.remove(this.edge)}},x=v.a.Util.each,C={getDefaultCfg:function(){return{}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave"}},onMouseEnter:function(e){var t=this,i=e.item,n=t.graph,a=n.get("autoPaint");if(n.setAutoPaint(!1),!t.keydown||!t.multiple){var o=n.findAllByState("node","hoverActive");x(o,(function(e){e!==i&&n.setItemState(e,"hoverActive",!1)}))}i.hasState("nodeHoverActive")?t.shouldUpdate(e)&&n.setItemState(i,"hoverActive",!1):t.shouldUpdate(e)&&n.setItemState(i,"hoverActive",!0),n.setAutoPaint(a),n.paint()},onMouseLeave:function(e){var t=this,i=e.item,n=t.graph;n.setItemState(i,"hoverActive",!1)}},k={getDefaultCfg:function(){return{keyCode:27,edge:null,addingEdge:!1}},getEvents:function(){return{"anchor:mousemove":"onMousemove",click:"onAnchorClick",keydown:"onKeyDown"}},onAnchorClick:function(){},onClick:function(e){var t=e.item,i=this.graph,n={x:e.x,y:e.y},a=t.getModel();this.addingEdge&&this.edge?(i.updateItem(this.edge,{target:a.id,targetAnchor:this.getNearestAuchorPointIndex(t,n)}),this.edge=null,this.addingEdge=!1):(this.edge=i.addItem("edge",{source:a.id,sourceAnchor:this.getNearestAuchorPointIndex(t,n),target:n,shape:"flow-spline"}),this.addingEdge=!0)},onMousemove:function(){},getNearestAuchorPointIndex:function(e,t){var i=e.getAnchorPoints();return y(i,t).index},onKeyDown:function(e){var t=e.keyCode||e.which;t===this.keyCode&&this.addingEdge&&this.graph.remove(this.edge)}},A=v.a.Util.each,D={getDefaultCfg:function(){return{multiple:!0,keyCode:17}},getEvents:function(){return{"node:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}},onClick:function(e){var t=this,i=e.item,n=t.graph,a=n.get("autoPaint");if(n.setAutoPaint(!1),!t.keydown||!t.multiple){var o=b({graph:n});A(o,(function(e){e!==i&&n.setItemState(e,"selected",!1)}))}var r=i.hasState("selected");r?(t.shouldUpdate(e)&&n.setItemState(i,"selected",!1),n.emit("itemSelectChange",{target:i,select:!1})):(t.shouldUpdate.call(e)&&n.setItemState(i,"selected",!0),n.emit("itemSelectChange",{target:i,select:!0})),n.setAutoPaint(a),n.paint()},onCanvasClick:function(){var e=this.graph,t=e.get("autoPaint");e.setAutoPaint(!1);var i=b({graph:e});A(i,(function(t){e.setItemState(t,"selected",!1)})),e.paint(),e.setAutoPaint(t)},onKeyDown:function(e){var t=e.keyCode||e.which;t===this.keyCode?this.keydown=!0:this.keydown=!1},onKeyUp:function(){this.keydown=!1}},P=(i("a4d3"),i("4de4"),i("e439"),i("dbb4"),i("b64b"),i("2fa7")),I={version:"1.0.0",flowRect:{style:{fill:"#e7f8ff",stroke:"#050eee",size:[100,50],radius:[4],cursor:"move"},StateStyle:{selected:{lineWidth:2,fill:"#94D5FD"}}},flowRhombus:{style:{fill:"#e7fffb",stroke:"#38d3c3",size:[80,80],radius:[4],cursor:"move"},StateStyle:{selected:{lineWidth:2,fill:"#89E7DE"}}},flowCircle:{style:{fill:"#fff3e9",stroke:"#ffa860",size:[50,50],cursor:"move"},StateStyle:{selected:{lineWidth:2,fill:"#fdd594"}}},flowEllipse:{style:{fill:"#F8F0FE",stroke:"#f265fe",size:[100,50],radius:[4],cursor:"move"},StateStyle:{selected:{lineWidth:2,fill:"#f9a5fd"}}},flowSmooth:{style:{endArrow:{path:[["M",-2,2],["L",2,0],["L",-2,-2],["A",4,4,0,0,1,-2,2],["Z"]],fill:"red",d:2}},StateStyle:{hoverActive:{stroke:"blue"}}},flowSpline:{style:{},StateStyle:{hoverActive:{stroke:"blue"}}},anchorPointStyle:{radius:3.5,fill:"#fff",stroke:"#1890FF",lineAppendWidth:12},anchorHotsoptStyle:{radius:12,fill:"#1890FF",fillOpacity:.25},node:{StateStyle:{default:{lineWidth:1},active:{fillOpacity:.8},selected:{lineWidth:2}}},edge:{StateStyle:{default:{lineWidth:1,stroke:"#333",size:"1",endArrow:!0},active:{strokeOpacity:.8},selected:{lineWidth:2}}},rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",defaultNode:{shape:"circle",style:{fill:"#fff"},size:40,color:"#333"},defaultEdge:{shape:"line",style:{},size:1,color:"#333"},nodeLabel:{style:{fill:"#595959",textAlign:"center",textBaseline:"middle"},offset:5},edgeLabel:{style:{fill:"#595959",textAlign:"center",textBaseline:"middle"}},loopPosition:"top",delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},orbitGap:10,nodeDefaultShape:"flow-node",edgeDefaultShape:"flow-smooth",groupDefaultShape:"flow-group",nodeActivedOutterStyle:{lineWidth:0},groupSelectedOutterStyle:{stroke:"#E0F0FF",lineWidth:2},nodeSelectedOutterStyle:{stroke:"#E0F0FF",lineWidth:2},edgeActivedStyle:{stroke:"#1890FF",strokeOpacity:.92},nodeActivedStyle:{fill:"#F3F9FF",stroke:"#1890FF"},groupActivedStyle:{stroke:"#1890FF"},edgeSelectedStyle:{lineWidth:2,strokeOpacity:.92,stroke:"#A3B1BF"},nodeSelectedStyle:{fill:"#F3F9FF",stroke:"#1890FF"},groupSelectedStyle:{stroke:"#1890FF",fillOpacity:.92},nodeStyle:{stroke:"#CED4D9",fill:"#FFFFFF",shadowOffsetX:0,shadowOffsetY:4,shadowBlur:10,shadowColor:"rgba(13, 26, 38, 0.08)",lineWidth:1,radius:4,fillOpacity:.92},edgeStyle:{stroke:"#A3B1BF",strokeOpacity:.92,lineWidth:1,lineAppendWidth:8,endArrow:!0},groupBackgroundPadding:[40,10,10,10],groupLabelOffsetX:10,groupLabelOffsetY:10,edgeLabelStyle:{fill:"#666",textAlign:"center",textBaseline:"middle"},edgeLabelRectPadding:4,edgeLabelRectStyle:{fill:"white"},nodeLabelStyle:{fill:"#666",textAlign:"center",textBaseline:"middle"},groupStyle:{stroke:"#CED4D9",radius:4},groupLabelStyle:{fill:"#666",textAlign:"left",textBaseline:"top"},multiSelectRectStyle:{fill:"#1890FF",fillOpacity:.08,stroke:"#1890FF",opacity:.1},dragNodeHoverToGroupStyle:{stroke:"#1890FF",lineWidth:2},dragNodeLeaveFromGroupStyle:{stroke:"#BAE7FF",lineWidth:2},anchorHotsoptActivedStyle:{radius:14},anchorPointHoverStyle:{radius:4,fill:"#1890FF",fillOpacity:1,stroke:"#1890FF"},nodeControlPointStyle:{radius:4,fill:"#fff",shadowBlur:4,shadowColor:"#666"},edgeControlPointStyle:{radius:6,symbol:"square",lineAppendWidth:6,fillOpacity:0,strokeOpacity:0},nodeSelectedBoxStyle:{stroke:"#C2C2C2"},cursor:{panningCanvas:"-webkit-grabbing",beforePanCanvas:"-webkit-grab",hoverNode:"move",hoverEffectiveAnchor:"crosshair",hoverEdge:"default",hoverGroup:"move",hoverUnEffectiveAnchor:"default",hoverEdgeControllPoint:"crosshair",multiSelect:"crosshair"},zIndex:{anchorPoint:3,anchorHotsopt:2,selectedBox:1,controlPoint:4},polylineEdgeStyle:{offset:10,borderRadius:5},addToGroupDelayTime:400,outFromGroupDelayTime:400};function O(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function E(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?O(i,!0).forEach((function(t){Object(P["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):O(i).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var F=I.delegateStyle,z=v.a.Util.mix,T={getDefaultCfg:function(){return{updateEdge:!0,delegate:!0,delegateStyle:{}}},getEvents:function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},onDragStart:function(e){this.shouldBegin(e)&&(this.target=e.item,this.origin={x:e.clientX,y:e.clientY})},onDrag:function(e){this.origin&&this.get("shouldUpdate").call(this,e)&&this._update(this.target,e)},onDragEnd:function(e){if(this.shouldEnd(e)&&this.origin){var t=e.item.get("delegateShape");t&&(t.remove(),this.target.set("delegateShape",null)),this._update(this.target,e,!0),this.point=null,this.origin=null}},_update:function(e,t,i){var n=this.origin,a=e.get("model");this.point||(this.point={x:a.x,y:a.y});var o=this.graph,r=o.getZoom(),s=(t.clientX-n.x)/r+this.point.x,l=(t.clientY-n.y)/r+this.point.y;this.origin={x:t.clientX,y:t.clientY},this.point={x:s,y:l},!this.delegate||i?this.get("updateEdge")?this.graph.updateItem(e,{x:s,y:l}):(e.updatePosition({x:s,y:l}),this.graph.paint()):this._updateDelegate(e,s,l)},_updateDelegate:function(e,t,i){var n=this,a=e.get("delegateShape"),o=e.get("keyShape").getBBox();if(!a){var r=n.graph.get("group"),s=z({},F,this.delegateStyle);a=r.addShape("rect",{attrs:E({width:o.width,height:o.height,x:t-o.width/2,y:i-o.height/2},s)}),a.set("capture",!1),e.set("delegateShape",a)}a.attr({x:t-o.width/2,y:i-o.height/2}),this.graph.paint()}},M=.005,_={getDefaultCfg:function(){return{sensitivity:10,minZoom:.2,maxZoom:10}},getEvents:function(){return{wheel:"onWheel"}},onWheel:function(e){if(e.preventDefault(),this.shouldUpdate(e)){var t=this.graph,i=t.get("canvas"),n=i.getPointByClient(e.clientX,e.clientY),a=i.get("pixelRatio"),o=this.get("sensitivity"),r=t.getZoom();r=e.wheelDelta>0?1-M*o:1+M*o;var s=r*t.getZoom();s>this.get("maxZoom")||s<this.get("minZoom")||(t.zoom(r,{x:n.x/a,y:n.y/a}),t.paint(),t.emit("wheelzoom",e))}}},j={getDefaultCfg:function(){return{}},getEvents:function(){return{"node:contextmenu":"contextmenu","node:mouseleave":"mouseleave"}},contextmenu:function(e){var t=e.canvasX,i=e.canvasY,n=e.item,a={left:t+"px",top:i+"px"};this.graph.emit("handleOpenNodeContextmenu",{position:a,item:n})},mouseleave:function(){this.graph.emit("handleCloseNodeContextmenu")}},N={clickAddEdge:w,clickAnchorAddEdge:k,hoverItemActived:C,clickItemSelect:D,dragNodeMove:T,zoomGraph:_,nodeContextMenu:j},B=N,Z=(i("d81d"),"-shape"),U="-label",L=v.a.Util,W=L.each,G=L.mix,R=L.isArray,H={draw:function(e,t){var i=this,n=this.drawShape(e,t);if(n.set("className",this.itemType+Z),e.label){var a=this.drawLabel(e,t);a.set("className",this.itemType+U)}return this.init(e,n,t),n.init=function(){return i.init(e,n,t)},n},init:function(e,t,i){this.drawAnchorPoints(t,i),t.size=this.getSize(e)},getSize:function(e){var t=this.getDefaultStyle(),i=e.size||t.size;return R(i)||(i=[i,i]),i},showAnchors:function(e){e.hideAnchorsTimer&&clearTimeout(e.hideAnchorsTimer),e.anchorShapes&&e.anchorShapes.forEach((function(e){e.show()}))},hideAnchors:function(e){e.hideAnchorsTimer=setTimeout((function(){e.anchorShapes&&e.anchorShapes.forEach((function(e){e.hide()}))}),500)},getType:function(){return this.type},clearAnchor:function(e){e.anchorShapes&&e.anchorShapes.forEach((function(e){e.remove()})),e.anchorShapes=[]},drawAnchorPoints:function(e,t){var i=e.getBBox(),n=i.minX,a=i.minY,o=i.width,r=i.height,s=this.getAnchorPoints().map((function(e,t){return{x:n+e[0]*o,y:a+e[1]*r,index:t}}));this.clearAnchor(e),W(s,(function(i){var n=t.addShape("marker",{attrs:G({symbol:"circle",x:i.x,y:i.y,r:20,cursor:"point"},I.anchorPointStyle)});n.toFront(),n.hide(),e.anchorShapes.push(n)}))},drawLabel:function(e,t){var i=e.labelCfg||{},n=this.getLabelStyle(e,i,t),a=t.addShape("text",{attrs:n});return a},setState:function(e,t,i){switch(e){case"hoverActive":var n=i.getKeyShape();t?this.showAnchors(n):this.hideAnchors(n);break;default:var a=i.get("keyShape");if(!a)return;var o=this.getStateStyle(e);if(t)i.getStateStyle(o),a.attr(o);else{var r=this.getDefaultStyle();a.attr(r)}}},getDefaultStyle:function(){var e=this,t=g.a.get(I,"".concat(g.a.camelCase(e.getType()),".style")),i=g.a.get(I,"".concat(e.itemType,".StateStyle.default"),{});return G({},i,t)},getStateStyle:function(e){var t=this,i=g.a.get(I,"".concat(g.a.camelCase(t.getType()),".StateStyle.").concat(e)),n=g.a.get(I,"".concat(t.itemType,".StateStyle.").concat(e),{});return G({},n,i)}},$=v.a.Util.mix,V=[$({},H,{drawShape:function(e,t){var i=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(i,{attrs:n});return a},getShapeStyle:function(e){var t=this.getSize(e),i=this.getDefaultStyle();return $({},{x:0,y:0,r:t[0]/2},i,e.style)},getAnchorPoints:function(){return[[.5,0],[0,.5],[1,.5],[.5,1]]}}),"circle"],X=v.a.Util.mix,Y=[X({},H,{shapeType:"polygon",drawShape:function(e,t){var i=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(i,{attrs:n});return a},getShapeStyle:function(e){var t=this.getSize(e),i=this.getDefaultStyle(),n=t[0],a=t[1];return X({},i,{points:[[0,a/2],[n/2,0],[0,0-a/2],[0-n/2,0]]},e.style)},getAnchorPoints:function(){return[[.5,0],[0,.5],[1,.5],[.5,1]]}}),"diamond"],K=v.a.Util.mix,J=[K({},H,{drawShape:function(e,t){var i=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(i,{attrs:n});return a},getShapeStyle:function(e){var t=this.getSize(e),i=this.getDefaultStyle(),n=t[0],a=t[1];return K({},i,{x:0-n/2,y:0-a/2,width:n,height:a},e.style)},getAnchorPoints:function(){return[[0,0],[.5,0],[1,0],[1,.5],[1,1],[.5,1],[0,1],[0,.5]]}}),"rect"],Q=v.a.Util.mix,q=[Q({},H,{drawShape:function(e,t){var i=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(i,{attrs:n});return a},getShapeStyle:function(e){var t=this.getSize(e),i=t[0]/2,n=t[1]/2,a=this.getDefaultStyle();return Q({},{x:0,y:0,rx:i,ry:n},a,e.style)},getAnchorPoints:function(){return[[.5,0],[0,.5],[1,.5],[.5,1]]}}),"ellipse"],ee={"flow-circle":V,"flow-rhombus":Y,"flow-rect":J,"flow-ellipse":q},te=v.a.Util.mix,ie={getShapeStyle:function(e){var t=this.getDefaultStyle(),i=e.size||t.size;e=this.getPathPoints(e);var n=e.startPoint,a=e.endPoint,o=this.getControlPoints(e),r=[n];o&&(r=r.concat(o)),r.push(a);var s=this.getPath(r);return te({},t,{lineWidth:i,path:s},e.style)},getType:function(){return this.type},setState:function(e,t,i){switch(e){default:var n=i.get("keyShape");if(!n)return;var a=this.getStateStyle(e);if(t)i.getStateStyle(a),n.attr(a);else{var o=this.getDefaultStyle();n.attr(o)}}},getDefaultStyle:function(){var e=this,t=g.a.get(I,"".concat(g.a.camelCase(e.getType()),".style")),i=g.a.get(I,"".concat(e.itemType,".StateStyle.default"),{});return te({},i,t)},getStateStyle:function(e){var t=this,i=g.a.get(I,"".concat(g.a.camelCase(t.getType()),".StateStyle.").concat(e)),n=g.a.get(I,"".concat(t.itemType,".StateStyle.").concat(e),{});return te({},n,i)}},ne=v.a.Util.mix,ae=[ne({},ie,{}),"cubic"],oe=v.a.Util.mix,re=[oe({},ie,{}),"single-line"],se=v.a.Util.mix,le=[se({},ie,{curvePosition:[.2,.2],getControlPoints:function(e){var t=e.startPoint,i=e.endPoint,n={x:(i.x-t.x)*this.curvePosition[0]+t.x,y:t.y},a={x:(i.x-t.x)*this.curvePosition[1]+t.x,y:i.y},o=[n,a];return o}}),"polyline"],ce=v.a.Util.mix,de=[ce({},ie,{curvePosition:[.2,.2],getControlPoints:function(e){var t=e.startPoint,i=e.endPoint,n={x:t.x,y:(i.y-t.y)*this.curvePosition[0]+t.y},a={x:i.x,y:(i.y-t.y)*this.curvePosition[1]+t.y},o=[n,a];return o}}),"polyline"],ue=v.a.Util,he=ue.mix,fe=ue.getControlPoint,ge=[he({},ie,{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var t=e.controlPoints;if(!t||!t.length){var i=e.startPoint,n=e.endPoint,a=fe(i,n,this.curvePosition,this.curveOffset);t=[a]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),t}}),"single-line"],pe=[{label:"曲线",value:"flow-smooth",definition:ae},{label:"直线",value:"flow-spline",definition:re},{label:"折线-横向",value:"flow-polyline-horizontal",definition:le},{label:"折线-纵向",value:"flow-polyline-vertical",definition:de},{label:"平滑",value:"flow-quadratic",definition:ge}],me=v.a.Util.each;me(B,(function(e,t){v.a.registerBehavior(t,e)})),me(ee,(function(e,t){v.a.registerNode.apply(v.a,[t].concat(Object(p["a"])(e)))})),me(pe,(function(e){v.a.registerEdge.apply(v.a,[e.value].concat(Object(p["a"])(e.definition)))}));var ve=v.a,ye=i("987f"),Se=i.n(ye),be=i("9f12"),we=i("53fe"),xe=i("8b83"),Ce=i("c65a"),ke=i("c03e"),Ae=v.a.Util,De=Ae.deepMix,Pe=Ae.each,Ie=Ae.wrapBehavior,Oe=function(){function e(t){Object(be["a"])(this,e),this._cfgs=De(this.getDefaultCfg(),t)}return Object(we["a"])(e,[{key:"getDefaultCfg",value:function(){return{}}},{key:"initPlugin",value:function(e){var t=this;t.set("graph",e);var i=t.getEvents(),n={};Pe(i,(function(i,a){var o=Ie(t,i);n[a]=o,e.on(a,o)})),this._events=n,this.init()}},{key:"init",value:function(){}},{key:"getEvents",value:function(){return{}}},{key:"get",value:function(e){return this._cfgs[e]}},{key:"set",value:function(e,t){this._cfgs[e]=t}},{key:"destroy",value:function(){}},{key:"destroyPlugin",value:function(){this.destroy();var e=this.get("graph"),t=this._events;Pe(t,(function(t,i){e.off(i,t)})),this._events=null,this._cfgs=null,this.destroyed=!0}}]),e}(),Ee=Oe,Fe=v.a.Util,ze=Fe.createDom,Te=Fe.modifyCSS,Me=Math.max,_e=Math.min,je=20,Ne="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",Be=function(e){function t(){return Object(be["a"])(this,t),Object(xe["a"])(this,Object(Ce["a"])(t).apply(this,arguments))}return Object(ke["a"])(t,e),Object(we["a"])(t,[{key:"init",value:function(){var e=this.get("graph"),t=e.get("minZoom"),i=e.get("container"),n=e.get("canvas").get("el"),a=e.get("width"),o=e.get("height"),r=ze('<div style="position: absolute; left:0;top:0;right:0;bottom:0;overflow: hidden;"></div>'),s=ze('<div class="g6-grid" style="position:absolute;transform-origin: 0% 0% 0px; background-image: '+Ne+'"></div>');r.appendChild(s),Te(n,{position:"relative","z-index":1}),Te(s,{width:a/t+"px",height:o/t+"px",left:-a/t/2+"px",top:-o/t/2+"px"}),i.insertBefore(r,n),this.set("container",r),this.set("gridContainer",s)}},{key:"getEvents",value:function(){return{viewportchange:"updateGrid"}}},{key:"updateGrid",value:function(e){var t=this.get("graph"),i=this.get("gridContainer"),n=e.matrix,a="matrix("+n[0]+","+n[1]+","+n[3]+","+n[4]+","+n[6]+","+n[7]+")",o=t.get("group").getBBox();Te(i,{transform:a,left:(_e(o.minX,0)-je)*Me(n[0],1)+"px",top:(_e(o.minY,0)-je)*Me(n[4],1)+"px"})}},{key:"getContainer",value:function(){return this.get("container")}},{key:"destroy",value:function(){var e=this.get("graph").get("container");e.removeChild(this.get("container"))}}]),t}(Ee),Ze=Be,Ue=i("75c5"),Le=i.n(Ue),We=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",{staticClass:"item-panel-wrapper"},e._l(e.items,(function(e,t){return i("Item",{key:t,attrs:{item:e}})})),1)},Ge=[],Re=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{ref:"shape",staticClass:"shape-item",attrs:{draggable:""}},[i("img",{attrs:{src:e.getIcon(e.item.icon)}})])},He=[],$e={props:{item:{type:Object,default:function(){return{}}}},components:{},data:function(){return{}},mounted:function(){this.init()},methods:{init:function(){var e=this.$refs["shape"];e.ondragstart=this.handleDragStart,e.ondragend=this.handleDragEnd},handleDragStart:function(e){e.dataTransfer.setData("info",encodeURIComponent(JSON.stringify(this.item)))},handleDragEnd:function(e){return e.dataTransfer.clearData("info"),!1},getIcon:function(e){return i("d7b8")("./".concat(e))}},computed:{},filters:{},watch:{}},Ve=$e,Xe=(i("f1eb"),Object(r["a"])(Ve,Re,He,!1,null,"0f02678f",null)),Ye=Xe.exports,Ke={props:{},components:{Item:Ye},data:function(){return{items:[{icon:"start.svg",type:"node",label:"start",shape:"flow-circle"},{icon:"decision.svg",type:"node",label:"decision",shape:"flow-rhombus"},{icon:"normal.svg",type:"node",label:"normal",shape:"flow-rect"},{icon:"model.svg",type:"node",label:"model",shape:"flow-ellipse"}]}},mounted:function(){this.init()},methods:{init:function(){}},computed:{},filters:{},watch:{}},Je=Ke,Qe=(i("2846"),Object(r["a"])(Je,We,Ge,!1,null,"0064b6cb",null)),qe=Qe.exports,et=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",{staticClass:"node-context-menu",style:e.wrapStyle},[i("li",{staticClass:"menu-item",on:{click:e.handleDelete}},[i("i",{staticClass:"el-icon-delete"}),i("span",[e._v("删除")])]),i("li",{staticClass:"menu-item",on:{click:e.handleToBack}},[i("i",{staticClass:"el-icon-document-remove"}),i("span",[e._v("置底")])]),i("li",{staticClass:"menu-item",on:{click:e.handleToFront}},[i("i",{staticClass:"el-icon-document-add"}),i("span",[e._v("置顶")])])])},tt=[],it={props:{graph:{}},components:{},data:function(){return{wrapStyle:{left:0,top:0,"z-index":-1},node:null}},created:function(){this.graph.on("handleOpenNodeContextmenu",this.handleOpenNodeContextmenu),this.graph.on("handleCloseNodeContextmenu",this.handleCloseNodeContextmenu)},beforeDestroy:function(){this.graph.off("handleOpenNodeContextmenu",this.handleOpenNodeContextmenu),this.graph.off("handleCloseNodeContextmenu",this.handleCloseNodeContextmenu)},mounted:function(){this.init()},methods:{init:function(){},handleOpenNodeContextmenu:function(e){var t=e.position,i=e.item;g.a.assign(this.wrapStyle,t,{"z-index":999}),this.node=this.graph.findById(i.getModel().id)},handleCloseNodeContextmenu:function(){g.a.assign(this.wrapStyle,{"z-index":-1}),this.node=null},handleDelete:function(){this.graph.remove(this.node),this.handleCloseNodeContextmenu()},handleToBack:function(){this.node&&this.node.toBack(),g.a.assign(this.wrapStyle,{"z-index":-1})},handleToFront:function(){this.node&&this.node.toFront(),g.a.assign(this.wrapStyle,{"z-index":-1})}},computed:{},filters:{},watch:{}},nt=it,at=(i("e483"),Object(r["a"])(nt,et,tt,!1,null,"e1e2e104",null)),ot=at.exports,rt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"detail-panel-detail"},["node"===e.type?i("NodeDetail",{attrs:{item:e.item,graph:e.graph}}):"edge"===e.type?i("EdgeDetail",{attrs:{item:e.item,graph:e.graph}}):e._e()],1)},st=[],lt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"item-detail-wrapper"},[i("div",{staticClass:"details-row row"},[i("div",{staticClass:"details-col"},[e._v("大小：")]),i("div",{staticClass:"details-col"},[i("el-button-group",[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-minus"},on:{click:function(t){return e.handleResizeItem(-1)}}}),i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:function(t){return e.handleResizeItem(1)}}})],1)],1)]),i("div",{staticClass:"details-row mt-10"},[i("div",{staticClass:"details-col"},[e._v("标签：")]),i("div",{staticClass:"details-col mt-10"},[i("el-input",{on:{change:e.handleConfirmLabel},model:{value:e.node.label,callback:function(t){e.$set(e.node,"label",t)},expression:"node.label"}})],1)])])},ct=[],dt=(i("498a"),{label:"",size:""}),ut={props:{item:{type:Object,default:function(){return{}}},graph:{type:Object,default:function(){return null}}},components:{},data:function(){return{node:g.a.cloneDeep(dt),rules:{loading:!1,none:!1,data:[]}}},created:function(){this.init()},mounted:function(){},methods:{init:function(e){var t=e||this.item,i=g.a.assign({},dt,t.getModel());i.size||(i.size=this.item.getKeyShape().size),this.node=i},handleConfirmLabel:function(e){this.graph.update(this.item,g.a.assign(this.node,{label:g.a.trim(e)}))},handleResizeItem:function(e){var t=this.node.size;t=t.map((function(t){return t+2*e})),this.node.size=t;var i=this.graph,n=i.get("autoPaint");i.setAutoPaint(!1),i.update(this.item,{size:t}),this.item.getKeyShape().init(),i.setAutoPaint(n),i.paint()}},computed:{},filters:{},watch:{item:function(e){this.init(e)}}},ht=ut,ft=(i("3baa"),Object(r["a"])(ht,lt,ct,!1,null,"706a6f7a",null)),gt=ft.exports,pt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"item-detail-wrapper"},[i("div",{staticClass:"details-row"},[i("div",{staticClass:"details-col"},[e._v("标签：")]),i("div",{staticClass:"details-col"},[i("el-input",{on:{change:e.handleConfirmLabel},model:{value:e.edge.label,callback:function(t){e.$set(e.edge,"label",t)},expression:"edge.label"}})],1)]),i("div",{staticClass:"details-row mt-10"},[i("div",{staticClass:"details-col"},[e._v("样式：")]),i("div",{staticClass:"details-col mt-10"},[i("el-select",{on:{change:e.handleChangeShape},model:{value:e.edge.shape,callback:function(t){e.$set(e.edge,"shape",t)},expression:"edge.shape"}},e._l(e.typeList,(function(e){return i("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)],1)])])},mt=[],vt={label:"",shape:""},yt={props:{item:{type:Object,default:function(){return{}}},graph:{type:Object,default:function(){return null}}},components:{},data:function(){return{edge:{},typeList:pe}},mounted:function(){this.init()},methods:{init:function(e){var t=e||this.item,i=g.a.assign({},vt,t.getModel());this.edge=i},handleConfirmLabel:function(e){this.graph.update(this.item,{label:g.a.trim(e)})},handleChangeShape:function(){var e=this.edge.shape;this.graph.update(this.item,{shape:e})}},computed:{},filters:{},watch:{item:function(e){this.init(e)}}},St=yt,bt=(i("8f08"),Object(r["a"])(St,pt,mt,!1,null,"8ee24ea4",null)),wt=bt.exports,xt={props:{graph:{type:Object,default:function(){return null}}},components:{NodeDetail:gt,EdgeDetail:wt},data:function(){return{item:null}},created:function(){this.graph.on("itemSelectChange",this.handleItemSelectChange),this.graph.on("deleteItem",this.handleItemIsDestory)},beforeDestroy:function(){this.graph.off("itemSelectChange",this.handleItemSelectChange),this.graph.off("deleteItem",this.handleItemIsDestory)},mounted:function(){this.init()},methods:{init:function(){},handleItemSelectChange:function(e){var t=e.target,i=e.select;this.item=i?t:null},handleItemIsDestory:function(){}},computed:{type:function(){var e=this.item;return!e||e.destroyed?null:e&&e.getType()}},filters:{},watch:{}},Ct=xt,kt=Object(r["a"])(Ct,rt,st,!1,null,"6aef96bc",null),At=kt.exports,Dt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mini-map-slider"},[i("el-slider",{attrs:{"show-tooltip":!1},on:{change:e.handleChange},model:{value:e.slider.value,callback:function(t){e.$set(e.slider,"value",t)},expression:"slider.value"}})],1)},Pt=[],It={props:{graph:{}},components:{},data:function(){return{slider:{value:0,minZoom:0,maxZoom:100}}},created:function(){this.graph.on("wheelzoom",this.initSliderValue),this.graph.on("fitView",this.initSliderValue)},beforeDestroy:function(){this.graph.off("wheelzoom",this.initSliderValue),this.graph.off("fitView",this.initSliderValue)},mounted:function(){this.init()},methods:{init:function(){var e=this.graph,t=e.get("minZoom"),i=e.get("maxZoom");Object.assign(this.slider,{minZoom:t,maxZoom:i}),this.initSliderValue()},initSliderValue:function(){var e=this.graph,t=this.slider,i=t.minZoom,n=t.maxZoom;this.slider.value=Math.max((e.getZoom()-i)/(n-i)*100,0)},format:function(){return null},handleChange:function(){var e=this.graph,t=this.slider,i=t.value,n=t.minZoom,a=t.maxZoom,o=e.getZoom(),r=i/100*(a-n)/o,s=e.get("canvas"),l=e.get("width"),c=e.get("height"),d={x:l/2,y:c/2},u=s.get("pixelRatio"),h=r*o;h>a||h<n||(e.zoom(r,{x:d.x/u,y:d.y/u}),e.paint())}},computed:{},filters:{},watch:{}},Ot=It,Et=(i("f248"),Object(r["a"])(Ot,Dt,Pt,!1,null,null,null)),Ft=Et.exports,zt={components:{ItemPanel:qe,NodeContextMenu:ot,DetailPanel:At,ZoomSlider:Ft},data:function(){return{graph:null,observer:Le()(),throttled:null}},mounted:function(){this.init()},beforeDestroy:function(){this.observer.removeListener(this.$refs["draw-container"],this.handleChangeGraphSize),this.graph.destroy()},methods:{init:function(){this.initGraph({}),this.initDebounce()},initGraph:function(e){var t=this.initPlugin(),i=this.$refs["draw-content"],n=this.getDomSize(i),a=n.width,o=n.height,r=new ve.Graph({container:i,width:a,height:o,pixelRatio:window.devicePixelRatio,fitView:!1,modes:{default:["zoomGraph","drag-canvas","dragNodeMove","clickAddEdge","hoverItemActived","clickItemSelect","nodeContextMenu"],drag:[]},plugins:t});r.data(e),r.render(),this.graph=r,this.initDragAdd(i,r)},initDragAdd:function(e,t){e.ondragover=function(e){e.preventDefault()},e.ondrop=function(e){var i=e.dataTransfer.getData("info");if(i){i=JSON.parse(decodeURIComponent(i));var n=i,a=n.type,o=n.shape,r=n.label,s=e.clientX,l=e.clientY;t.add(a,g.a.assign({x:100,y:100,shape:o,label:r,id:"node_"+(new Date).getTime()},t.getPointByClient(s,l)))}}},initDebounce:function(){var e=this;this.debounce=function(){e.timer&&clearTimeout(e.timer),e.timer=setTimeout((function(){var t=e.$refs["draw-content"],i=e.getDomSize(t),n=i.width,a=e.getDomSize(t.querySelector("canvas")),o=a.height;e.graph.changeSize(n,o)}),100)},this.observer.listenTo(this.$refs["draw-content"],this.debounce)},initPlugin:function(){var e=this.$refs["mini-map"],t=this.getDomSize(e),i=t.width,n=t.height;return[new Se.a({container:e,size:[i,n]}),new Ze]},getDomSize:function(e){return{width:function(){var t=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10)).toFixed(0)-0}(),height:function(){var t=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)).toFixed(0)-0}()}},getXmindData:function(){var e=this.graph.save(),t=e.edges,i=e.nodes;return t=g.a.flatMap(t,(function(e){return g.a.pick(e,["source","target","shape","sourceAnchor","label","targetAnchor"])})),{edges:t,nodes:i}}},computed:{},filters:{},watch:{}},Tt=zt,Mt=(i("8279"),Object(r["a"])(Tt,u,h,!1,null,null,null)),_t=Mt.exports;n["default"].use(d["a"]);var jt=[{path:"/",name:"Flow",component:_t}],Nt=new d["a"]({mode:"hash",base:"/g6editor-vue/",routes:jt}),Bt=Nt,Zt=i("2f62");n["default"].use(Zt["a"]);var Ut=new Zt["a"].Store({state:{},mutations:{},actions:{},modules:{}}),Lt=i("7893"),Wt=i.n(Lt);i("610a"),i("4e6e");n["default"].use(Wt.a),n["default"].config.productionTip=!1,new n["default"]({router:Bt,store:Ut,render:function(e){return e(c)}}).$mount("#app")},"6c20":function(e,t,i){e.exports=i.p+"img/normal.745e1020.svg"},8279:function(e,t,i){"use strict";var n=i("e318"),a=i.n(n);a.a},"8f08":function(e,t,i){"use strict";var n=i("e69a"),a=i.n(n);a.a},"8f6f":function(e,t,i){},a064:function(e,t,i){e.exports=i.p+"img/start.675d6a49.svg"},cf25:function(e,t,i){"use strict";var n=i("dac7"),a=i.n(n);a.a},d7b8:function(e,t,i){var n={"./decision.svg":"f74b","./model.svg":"4b3b","./normal.svg":"6c20","./start.svg":"a064"};function a(e){var t=o(e);return i(t)}function o(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=o,e.exports=a,a.id="d7b8"},dac7:function(e,t,i){},e318:function(e,t,i){},e483:function(e,t,i){"use strict";var n=i("2508"),a=i.n(n);a.a},e69a:function(e,t,i){},e747:function(e,t,i){},f1eb:function(e,t,i){"use strict";var n=i("8f6f"),a=i.n(n);a.a},f248:function(e,t,i){"use strict";var n=i("1280"),a=i.n(n);a.a},f74b:function(e,t,i){e.exports=i.p+"img/decision.e8ef2b45.svg"}});